<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário MLE - Mandado de Levantamento Eletrônico</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f4f4;
            color: #333;
        }

        .container {
            width: 186mm;
            max-width: 186mm;
            margin: 0 auto;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 15mm;
        }

        .header {
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 20px;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
        }

        .header span {
            font-weight: normal;
        }

        .section {
            margin-bottom: 20px;
        }

        .inline-section {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .inline-section.smaller-margin {
            margin-bottom: 10px;
        }

        .inline-section.print-smaller-margin {
            margin-bottom: 1px;
        }

        .inline-section label {
            width: 280px;
            font-weight: bold;
            margin-right: 10px;
        }

        .inline-section input[type="text"],
        .inline-section input[type="number"] {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        input[type="radio"] {
            margin-right: 5px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }

        label {
            font-weight: bold;
        }

        .radio-group label {
            font-weight: normal;
        }

        .radio-group {
            margin-bottom: 10px;
        }

        .observacoes input {
            width: calc(100% - 20px);
            padding: 10px;
        }

        .no-border-on-pdf input[type="text"],
        .no-border-on-pdf input[type="number"] {
            border: none;
            /*border-bottom: 1px solid #000;*/
            background: none;
            box-shadow: none;
            padding: 5px;
        }

        .no-border-on-pdf {
            border: 2px solid #000;
            padding: 10mm 1mm 10mm 1mm;
            margin: 0;
            width: 189mm;
        }

        @media print {
            body {
                background-color: #fff;
            }

            .container {
                box-shadow: none;
                border: none;
                width: 100%;
                margin: 0;
                padding: 0;
            }

            .header {
                font-size: 1.1em;
                border-bottom: 1px solid #000;
                margin-bottom: 15px;
            }

            .inline-section,
            .section,
            .radio-group {
                page-break-inside: avoid;
            }

            .no-border-on-pdf input[type="text"],
            .no-border-on-pdf input[type="number"] {
                border: none;
                border-bottom: 1px solid #000;
                background: none;
                box-shadow: none;
                padding: 5px;
            }
        }

        .print-button {
            display: block;
            width: 150px;
            margin: 20px auto;
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            text-align: center;
            text-decoration: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .print-button:hover {
            background-color: #0056b3;
        }
    </style>
    <script src="https://unpkg.com/imask"></script>
</head>

<body>
    <div class="container">
        <div class="header">
            FORMULÁRIO MLE – MANDADO DE LEVANTAMENTO ELETRÔNICO<br>
            <span>(1 Formulário para cada beneficiário)</span>
        </div>
        <div class="inline-section smaller-margin" id="processo-section">
            <label>Número do processo (padrão CNJ):</label>
            <input type="text" name="numero_processo" id="numero_processo">
        </div>
        <div class="inline-section smaller-margin" id="credor-section">
            <label>Nome do Credor (Beneficiário):</label>
            <input type="text" name="nome_credor">
        </div>
        <div class="inline-section smaller-margin" id="cpf-section">
            <label>CPF/CNPJ do Credor (Beneficiário):</label>
            <input type="text" name="cpf_cnpj_credor">
        </div>
        <p style="height: 2px;"></p>

        <div class="section">
            <label>Forma de recebimento:</label><br>
            <div class="radio-group">
                <input type="radio" name="forma_recebimento" value="comparecer_banco" class="radio-option"> Comparecer
                ao banco [valores até
                R$ 5.000,00 – isento de tarifa]<br>
                <input type="radio" name="forma_recebimento" value="credito_bb" class="radio-option"> Crédito em conta
                do Banco do Brasil*
                [Qualquer valor. Isento de tarifa]<br>
                <input type="radio" name="forma_recebimento" value="credito_outros" class="radio-option"> Crédito em
                conta para outros
                bancos* [Qualquer valor. Isento de tarifa]<br>
                <input type="radio" name="forma_recebimento" value="pix" class="radio-option"> IV – Pix [valores até R$
                50.000,00 – isento de
                tarifa]
            </div>
        </div>
        <div class="section">
            <label>Titular da conta de destino:</label><br>
            <div class="radio-group">
                <input type="radio" name="titular_conta" value="parte" class="radio-option"> Parte<br>
                <input type="radio" name="titular_conta" value="advogado" class="radio-option"> Advogado – OAB/___
                nº_____ - Procuração nas
                fls. ____<br>
                <input type="radio" name="titular_conta" value="procurador" class="radio-option">
                Procurador/Representante Legal – Procuração
                nas fls. ____<br>
                <input type="radio" name="titular_conta" value="terceiro" class="radio-option"> Terceiro
            </div>
        </div>
        <div class="inline-section">
            <label>Banco:</label>
            <input type="text" name="banco">
        </div>
        <div class="inline-section">
            <label>Código do Banco:</label>
            <input type="text" name="codigo_banco">
        </div>
        <div class="inline-section">
            <label>Agência:</label>
            <input type="text" name="agencia">
        </div>
        <div class="inline-section">
            <label>Conta nº:</label>
            <input type="text" name="conta_numero">
        </div>
        <div class="section">
            <label>Tipo de Crédito:</label><br>
            <div class="radio-group">
                <input type="radio" name="tipo_credito" value="conta_corrente" class="radio-option"> Conta Corrente
                <input type="radio" name="tipo_credito" value="poupanca" class="radio-option"> Conta Poupança
            </div>
        </div>
        <div class="inline-section">
            <label>CPF/CNPJ do titular da conta destino:</label>
            <input type="text" name="cpf_cnpj_titular">
        </div>
        <div class="inline-section">
            <label>Nome do titular da conta destino:</label>
            <input type="text" name="nome_titular">
        </div>
        <div class="section">
            <label>Tipo de Resgate:</label><br>
            <div class="radio-group">
                <input type="radio" name="tipo_resgate" value="parcial" class="radio-option"> Parcial
                <input type="radio" name="tipo_resgate" value="total" class="radio-option"> Total
            </div>
        </div>
        <div class="inline-section">
            <label>Nº da página do processo em que consta o comprovante do depósito:</label>
            <input type="number" name="pagina_processo">
        </div>
        <div class="inline-section">
            <label>Valor nominal do depósito:</label>
            <input type="text" name="valor_deposito">
        </div>
        <div class="section observacoes">
            <label>Observações:</label><br>
            <input type="text" name="observacoes">
        </div>
        <button class="print-button" onclick="generatePDF()">Gerar PDF</button>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var element = document.getElementById('numero_processo');
            var maskOptions = {
                mask: '0000000-00.2X00.8.26.X344',
                definitions: {
                    X: {
                        mask: '0',
                        displayChar: '0',
                        placeholderChar: '0',
                    },
                },
                lazy: false,
                overwrite: 'shift',
            };
            var mask = IMask(element, maskOptions);
        });

        function generatePDF() {
            const element = document.querySelector('.container');
            const printButton = document.querySelector('.print-button');
            const smallerSections = document.querySelectorAll('.inline-section.smaller-margin');

            // Ocultar o botão "Gerar PDF"
            printButton.style.display = 'none';

            // Substituir botões de rádio selecionados por "X" e não selecionados por "( )"
            const radioGroups = document.querySelectorAll('.radio-group');
            radioGroups.forEach(group => {
                const selectedRadio = group.querySelector('input[type="radio"]:checked');
                if (selectedRadio) {
                    const label = selectedRadio.nextElementSibling;
                    const xSpan = document.createElement('span');
                    xSpan.textContent = 'X ';
                    label.parentNode.insertBefore(xSpan, label);
                    selectedRadio.style.display = 'none';
                }
                group.querySelectorAll('input[type="radio"]').forEach(radio => {
                    if (!radio.checked) {
                        const label = radio.nextElementSibling;
                        const emptySpan = document.createElement('span');
                        emptySpan.textContent = '( ) ';
                        label.parentNode.insertBefore(emptySpan, label);
                    }
                    radio.style.display = 'none';
                });
            });

            smallerSections.forEach(section => {
                section.classList.add('print-smaller-margin');
            });
            element.classList.add('no-border-on-pdf');

            html2pdf().set({
                margin: [10, 10, 10, 10],
                filename: 'Formulario_MLE.pdf',
                image: { type: 'jpeg', quality: 0.98 },
                html2canvas: { scale: 2, useCORS: true },
                jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
            }).from(element).save().then(() => {
                // Mostrar o botão "Gerar PDF" novamente
                printButton.style.display = 'block';
                element.classList.remove('no-border-on-pdf');
                smallerSections.forEach(section => {
                    section.classList.remove('print-smaller-margin');
                });

                // Restaurar os botões de rádio
                radioGroups.forEach(group => {
                    group.querySelectorAll('input[type="radio"]').forEach(radio => {
                        radio.style.display = 'inline-block';
                    });
                    const selectedRadio = group.querySelector('input[type="radio"]:checked');
                    if (selectedRadio) {
                        const label = selectedRadio.nextElementSibling;
                        const xSpan = label.previousElementSibling;
                        if (xSpan && xSpan.textContent === 'X ') {
                            xSpan.remove();
                        }
                    }
                    group.querySelectorAll('span').forEach(span => {
                        if (span.textContent === '( ) ') {
                            span.remove();
                        }
                    });
                });
            });
        }
    </script>
</body>

</html>