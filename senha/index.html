<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Imprimir Senha</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            font-size: 1.7em;
        }

        #senhaForm {
            background-color: #fff;
            padding: 2%;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 100%;
        }

        label {
            font-weight: bold;
            margin-bottom: 10px;
            display: block;
        }

        input {
            width: 100%;
            padding: 10px;
            margin-bottom: 15px;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1em;
        }

        button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1em;
        }

        button:hover {
            background-color: #0056b3;
        }

        #pdfContent {
            display: none;
            font-size: 1.2em;
        }
    </style>
</head>

<body>
    <form id="senhaForm">

        <label for="senha">Nº do Processo:</label>
        <input type="text" id="processo" name="processo" required>
        <label for="senha">Chave de Acesso:</label>
        <input type="text" id="senha" name="senha" required>
        <button type="button" onclick="generatePDF()">Imprimir</button>
    </form>

    <div id="pdfContent">
        <p id="pdfCabecalho" style="text-align: center;    font-weight: bold;
            font-size: 14pt;
            text-align: center;
            font-family: 'Times New Roman', Georgia, Times, serif;
            margin: 0 auto;
            width: 100%;">Cabeçalho do PDF (edite aqui)</p>
        <p id="pdfCabecalho-end" style="
            font-size: 10pt;
            font-family: 'Times New Roman', Georgia, Times, serif;
            text-align: center;
            vertical-align: text-top;
            padding: 1px;
            width: 100%;">Cabeçalho do PDF (edite aqui)</p>

        <p style=" font-size: 14pt;"><b>Nº do Processo:</b> <span id="pdfProcesso"></span></p>
        <p style=" font-size: 14pt;"><b>Chave de Acesso:</b> <span id="pdfSenha"></span></p>
        <p style="text-align: justify; font-size: 18px;" id="pdfTextoAdicional">Texto adicional que você pode editar
            aqui.</p>
    </div>

    <script>
        function generatePDF() {
            const processo = document.getElementById('processo').value;
            const senha = document.getElementById('senha').value;

            if (!processo) {
                alert('Por favor, digite o número do processo.');
                return;
            }
            if (!senha) {
                alert('Por favor, digite a chave de acesso.');
                return;
            }

            // Instancia o jsPDF diretamente
            const doc = new window.jspdf.jsPDF({
                orientation: 'p',
                unit: 'mm',
                format: 'a4'
            });
            // Adiciona a imagem (se existir e for necessária)
            // Nota: A imagem precisa estar acessível e o CORS configurado se for de outro domínio.
            // Como o jsPDF puro não lida bem com caminhos relativos como html2pdf,
            // é mais seguro usar uma URL completa ou dados base64.
            // Por simplicidade, vamos omitir a imagem por enquanto, focando no texto.

            doc.setFont('Times-Roman', 'bold');
            doc.setFontSize(14);
            doc.text('Poder Judiciário', 105, 20, { align: 'center' });
            doc.text('JUSTIÇA ESTADUAL', 105, 27, { align: 'center' });
            doc.text('Tribunal de Justiça do Estado de São Paulo', 105, 34, { align: 'center' });
            doc.text('Juizado Especial Cível de Marília', 105, 41, { align: 'center' });

            doc.setFont('Times-Roman', 'normal');
            doc.setFontSize(10);
            doc.text('Rua Lourival Freire, 120, Fragata, CEP 17519-902, Marília/SP', 105, 50, { align: 'center' });

            doc.setFontSize(18);
            doc.setFont('Times-Roman', 'bold');
            doc.text('Nº do Processo:', 20, 70);
            doc.setFont('Times-Roman', 'normal');
            doc.text(processo, 70, 70);

            doc.setFont('Times-Roman', 'bold');
            doc.text('Chave de Acesso:', 20, 80);
            doc.setFont('Times-Roman', 'normal');
            doc.text(senha, 70, 80);

            // Define a posição inicial Y para o texto longo
            let yPosition = 95;

            // --- 1. Parágrafo justificado ---
            doc.setFontSize(18);
            const paragrafoJustificado = `Esta chave é de uso pessoal e intransferível para a consulta do conteúdo integral do processo na página do sistema eproc do site do Tribunal de Justiça do Estado de São Paulo na internet: https://tjsp.jus.br/eproc`;
            doc.text(paragrafoJustificado, 20, yPosition, { maxWidth: 170, align: 'justify' });

            // Calcula a altura do parágrafo justificado para saber onde começar o próximo texto
            const alturaParagrafo = doc.getTextDimensions(paragrafoJustificado, { maxWidth: 170 }).h;
            yPosition += alturaParagrafo + 5; // Adiciona um espaçamento de 5mm

            // --- 2. Instruções (não justificadas) ---
            const instrucoes = `Para acessar a íntegra do processo:\n- Acesse o https://tjsp.jus.br/eproc ;\n- Clique na opção "1º Grau"\n- Menu "Consulta Unificada"\n- Clique em "Consulta avançada EPROC"\n- Informe o número do processo ${processo} e a chave ${senha}.`;
            doc.text(instrucoes, 20, yPosition, { maxWidth: 170 });

            // Calcula a altura das instruções com a mesma largura máxima
            const alturaInstrucoes = doc.getTextDimensions(instrucoes, { maxWidth: 170 }).h;
            yPosition += alturaInstrucoes + 5; // Ajustado para um espaçamento consistente

            // --- 3. Parágrafo final (justificado) ---
            const paragrafoFinal = `O acesso aos autos digitais via sistema é considerado vista pessoal.`;

            doc.text(paragrafoFinal, 20, yPosition, { maxWidth: 170, align: 'justify' });

            doc.save(`senha_processo_${processo}.pdf`);
        }
    </script>
</body>

</html>